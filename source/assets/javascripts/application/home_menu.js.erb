$(document).ready(function () {

    var menu_container = document.getElementById('main');

    if (menu_container !== null) {

      var paper = Raphael("main", 1200, 660);
      var btn_width = 367,
          btn_height = 319,
          btn_offset = 185,
          padding_left = 31,
          btns_top_offset = 336;


      var path_attrs = { stroke: '', cursor: 'pointer', fill: '#000', 'fill-opacity': 0.01, 'stroke-width': 0 };
      var text_attrs = { font: '32px HighwaySansProBold', fill: '#ea675b', 'fill-opacity': 1, stroke: 0 };
      var img_attrs = {  };


      var left_bottom_coords = function () {
        var coords = 'M';
        coords += padding_left;
        coords += ',';
        coords += '336';

        coords += 'L';
        coords += btn_offset + padding_left;
        coords += ',';
        coords += 336 + btn_height;

        coords += 'L';
        coords += btn_offset + padding_left + btn_width;
        coords += ',';
        coords += 336 + btn_height;

        coords += 'L';
        coords += padding_left + btn_width;
        coords += ',';
        coords += 336;

        coords += 'Z';

        return coords;
      }();
      var left_top_coords = function () {
        var coords = 'M';
        coords += padding_left + btn_offset;
        coords += ',';
        coords += 0;

        coords += 'L';
        coords += padding_left;
        coords += ',';
        coords += btn_height;

        coords += 'L';
        coords += padding_left + btn_width;
        coords += ',';
        coords += btn_height;

        coords += 'L';
        coords += padding_left + btn_offset + btn_width;
        coords += ',';
        coords += 0;

        coords += 'Z';
        return coords;
      }();
      var right_top_coords = function () {
        var this_offset = padding_left * 2 + btn_offset + btn_width + 3,
            coords = 'M';
        coords += this_offset;
        coords += ',';
        coords += 0;

        coords += 'L';
        coords += this_offset + btn_offset;
        coords += ',';
        coords += btn_height;

        coords += 'L';
        coords += this_offset + btn_offset + btn_width;
        coords += ',';
        coords += btn_height;

        coords += 'L';
        coords += this_offset + btn_width;
        coords += ',';
        coords += 0;

        coords += 'Z';
        return coords;
      }();
      var right_bottom_coords = function () {
        var this_offset = padding_left + btn_offset + btn_width + 3,
            coords = 'M';
        coords += this_offset + padding_left + btn_offset;
        coords += ',';
        coords += btns_top_offset;

        coords += 'L';
        coords += this_offset + padding_left;
        coords += ',';
        coords += btns_top_offset + btn_height;

        coords += 'L';
        coords += this_offset + padding_left + btn_width;
        coords += ',';
        coords += btns_top_offset + btn_height;

        coords += 'L';
        coords += this_offset + padding_left + btn_offset + btn_width;
        coords += ',';
        coords += btns_top_offset;

        coords += 'Z';
        return coords;
      }();
      var center_coords = function () {
        var coords = 'M';
        coords += padding_left + btn_offset + btn_width + padding_left / 2 + 2;
        coords += ',';
        coords += padding_left / 2 - 6;

        coords += 'L';
        coords += padding_left * 1.6 + btn_width;
        coords += ',';
        coords += btns_top_offset - 10;

        coords += 'L';
        coords += padding_left + btn_offset + btn_width + padding_left / 2 + 2;
        coords += ',';
        coords += btns_top_offset + btn_height - 6;

        coords += 'L';
        coords += padding_left * 1.6 + btn_width + btn_width;
        coords += ',';
        coords += btns_top_offset - 10;

        coords += 'Z';
        return coords;
      }();

      //    var bg = paper.image("/assets/home-bg.jpg", 0, 0, 1200, 733);


      var left_top_img = paper.image("<%= image_path('home-menu-sprites/engineering.png') %>", padding_left, 0, 554, 320).attr(img_attrs);
      var left_bottom_img = paper.image("<%= image_path('home-menu-sprites/tech_service.png') %>", padding_left, btns_top_offset, 554, 320).attr(img_attrs);
      var right_top_img = paper.image("<%= image_path('home-menu-sprites/soft.png') %>", padding_left * 2 + btn_offset + btn_width + 3, 0, 554, 320).attr(img_attrs);
      var right_bottom_img = paper.image("<%= image_path('home-menu-sprites/medicine.png') %>", padding_left * 2 + btn_offset + btn_width + 3, btns_top_offset, 554, 320).attr(img_attrs);
      var center_img = paper.image("<%= image_path('home-menu-sprites/map.png') %>", padding_left + btn_width + 15, 10, 369, 639).attr(img_attrs);


      var left_top_img_hover = paper.image("<%= image_path('home-menu-sprites/engineering_hover.png') %>", padding_left, 0, 554, 320).attr(img_attrs).hide();
      var left_bottom_img_hover = paper.image("<%= image_path('home-menu-sprites/tech_service_hover.png') %>", padding_left, btns_top_offset, 554, 320).attr(img_attrs).hide();
      var right_top_img_hover = paper.image("<%= image_path('home-menu-sprites/soft_hover.png') %>", padding_left * 2 + btn_offset + btn_width + 3, 0, 554, 320).attr(img_attrs).hide();
      var right_bottom_img_hover = paper.image("<%= image_path('home-menu-sprites/medicine_hover.png') %>", padding_left * 2 + btn_offset + btn_width + 3, btns_top_offset, 554, 320).attr(img_attrs).hide();
      var center_img_hover = paper.image("<%= image_path('home-menu-sprites/map_hover.png') %>", padding_left + btn_width + 15, 10, 369, 639).attr(img_attrs).hide();

      //    var left_top_txt = paper.text(180, 150, "ИНЖЕНЕРНЫЕ\nСИСТЕМЫ").attr(text_attrs).attr({ 'text-anchor': 'start' });
      //    var left_bottom_txt = paper.text(180, 500, "ЭКСПЛУАТАЦИЯ\nИ ТО ОБЪЕКТОВ").attr(text_attrs).attr({ 'text-anchor': 'start' });
      //    var right_top_txt = paper.text(780, 150, "ПРОГРАММНО-\nТЕХНИЧЕСКИЕ\nКОМПЛЕКСЫ").attr(text_attrs).attr({ 'text-anchor': 'start' });
      //    var right_bottom_txt = paper.text(780, 500, "ОБЪЕКТЫ\nМЕДИЦИНЫ").attr(text_attrs).attr({ 'text-anchor': 'start' });
      //    var center_txt = paper.text(600, 320, "КАРТА\nОБЪЕКТОВ").attr(text_attrs).attr({ 'text-anchor': 'middle' });

      var left_top_path = paper.path(left_top_coords).attr(path_attrs).attr({title: 'Инженерные системы', href: '/engineering'});
      var left_bottom_path = paper.path(left_bottom_coords).attr(path_attrs).attr({title: 'Эксплуатация и обслуживание объектов и комплексов', href: '/exploitation'});
      var right_top_path = paper.path(right_top_coords).attr(path_attrs).attr({title: 'Программно-технические решения', href: '/programmes'});
      var right_bottom_path = paper.path(right_bottom_coords).attr(path_attrs).attr({title: 'Создание высокотехнологических сооружений', href: '/hitech'});
      var center_path = paper.path(center_coords).attr(path_attrs).attr({title: 'Карта объектов', href: '/facilities'});


      function default_btn_styles(item) {
        item.hide()
      };

      function hover_btn_styles(item) {
        item.show()
      };


      var path_hover = function (img) {
        if (img)
          hover_btn_styles(img);
      };
      var path_unhover = function (img) {
        if (img)
          default_btn_styles(img);
      };


      left_top_path.hover(
          function () {
            path_hover(left_top_img_hover)
          },
          function () {
            path_unhover(left_top_img_hover)
          }
      );

      left_bottom_path.hover(
          function () {
            path_hover(left_bottom_img_hover)
          },
          function () {
            path_unhover(left_bottom_img_hover)
          }
      );

      right_top_path.hover(
          function () {
            path_hover(right_top_img_hover)
          },
          function () {
            path_unhover(right_top_img_hover)
          }
      );

      right_bottom_path.hover(
          function () {
            path_hover(right_bottom_img_hover)
          },
          function () {
            path_unhover(right_bottom_img_hover)
          }
      );

      center_path.hover(
          function () {
            path_hover(center_img_hover)
          },
          function () {
            path_unhover(center_img_hover)
          }
      );

      left_top_path.click(function () {
        window.location = this.attrs.href;
      });
      left_bottom_path.click(function () {
        window.location = this.attrs.href;
      });
      right_top_path.click(function () {
        window.location = this.attrs.href;
      });
      right_bottom_path.click(function () {
        window.location = this.attrs.href;
      });
      center_path.click(function () {
        window.location = this.attrs.href;
      });

      paper.safari();
    }

});
